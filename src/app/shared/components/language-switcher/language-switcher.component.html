<div class="language-switcher">
  <button
    mat-button
    class="language-button"
    [matMenuTriggerFor]="languageMenu"
    aria-label="Change language"
  >
    <span class="flag">{{ getFlagEmoji(currentLanguage) }}</span>
    <span class="language-name">{{ currentLanguage.code.toUpperCase() }}</span>
    <mat-icon>expand_more</mat-icon>
  </button>

  <mat-menu #languageMenu="matMenu" class="language-menu">
    <div class="menu-header">
      <h3>{{ "languages.selectLanguage" | transloco }}</h3>
    </div>
    <button
      mat-menu-item
      *ngFor="let language of languages"
      [class.active]="language.code === currentLanguage.code"
      (click)="switchLanguage(language)"
    >
      <div class="language-item">
        <span class="flag">{{ getFlagEmoji(language) }}</span>
        <div class="language-info">
          <span class="language-name">{{ getLocalizedName(language) }}</span>
          <span class="language-local-name">{{
            getLocalizedLocalName(language)
          }}</span>
        </div>
        <mat-icon *ngIf="language.code === currentLanguage.code"
          >check</mat-icon
        >
      </div>
    </button>
  </mat-menu>
</div>
