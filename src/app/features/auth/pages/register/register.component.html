<div class="auth-container">
  <div class="auth-content">
    <!-- Branding -->
    <div class="branding">
      <img
        src="assets/images/nepal-government-logo.png"
        alt="Government Logo"
      />
      <h1>नेपाल सरकार</h1>
      <h2>डिजिटल प्रोफाइल व्यवस्थापन प्रणाली</h2>
      <h3>Digital Profile Management System</h3>
    </div>

    <mat-card>
      <mat-card-header>
        <mat-card-title>Setup Your Account</mat-card-title>
        <app-step-indicator
          [steps]="steps$ | async"
          [currentStepIndex]="
            (currentStep$ | async) ? (currentStep$ | async)! - 1 : 0
          "
        ></app-step-indicator>
      </mat-card-header>

      <mat-card-content>
        <ng-container [ngSwitch]="currentStep$ | async">
          <app-register-step-one *ngSwitchCase="1"></app-register-step-one>
          <app-register-step-two *ngSwitchCase="2"></app-register-step-two>
          <app-register-step-three *ngSwitchCase="3"></app-register-step-three>
          <app-register-step-one *ngSwitchDefault></app-register-step-one>
        </ng-container>
      </mat-card-content>

      <mat-card-actions>
        <div class="form-footer">
          <span>Already have an account?</span>
          <a mat-button color="primary" routerLink="/auth/login">Sign in</a>
        </div>

        <div class="form-actions">
          <button
            mat-button
            *ngIf="(currentStep$ | async)! > 1"
            (click)="handlePreviousStep()"
            [disabled]="loading"
          >
            Previous
          </button>

          <button
            mat-raised-button
            color="primary"
            *ngIf="!(isLastStep$ | async)"
            (click)="handleNextStep()"
            [disabled]="!(canProceedToNextStep$ | async) || loading"
          >
            Next
          </button>

          <button
            mat-raised-button
            color="primary"
            *ngIf="isLastStep$ | async"
            (click)="onSubmit()"
            [disabled]="!(canProceedToNextStep$ | async) || loading"
          >
            {{ loading ? "Creating Account..." : "Create Account" }}
          </button>
        </div>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
